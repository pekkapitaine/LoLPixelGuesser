import{B as M,E as I,G as g,L as o,M as a,N as r,O as w,P as m,Q as d,V as i,ba as y,c as _,ha as E,i as P,ja as k,l as C,ma as O,n as c,na as S,o as p,oa as T,pa as A,s as v,u as f,x as h}from"./chunk-CDHMGMKZ.js";var V=[{path:"",loadComponent:()=>import("./chunk-R6KHQJUZ.js").then(e=>e.HomeComponent)},{path:"game/:difficulty",loadComponent:()=>import("./chunk-OG7FGWIU.js").then(e=>e.GameComponent)},{path:"challenge",loadComponent:()=>import("./chunk-EY6KHUIW.js").then(e=>e.ChallengeComponent)},{path:"challenge/item",loadComponent:()=>import("./chunk-WF3HJPFF.js").then(e=>e.ItemGameComponent)},{path:"**",redirectTo:""}];var D={providers:[y({eventCoalescing:!0}),S(V,T(O),A())]};var u=class e{deferredPrompt=null;showInstallModal=v(!1);showUpdateModal=v(!1);isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent);activeTab=v("android");get isInstalled(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}init(){"serviceWorker"in navigator&&window.addEventListener("load",()=>_(this,null,function*(){try{let n=yield navigator.serviceWorker.register("./sw.js");setInterval(()=>n.update(),1e4),n.waiting&&this.showUpdateModal.set(!0),n.addEventListener("updatefound",()=>{let t=n.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&this.showUpdateModal.set(!0)})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}catch(n){console.error("Erreur SW :",n)}})),window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),this.deferredPrompt=n,this.checkAndShowInstallModal()})}checkAndShowInstallModal(){if(!this.isInstalled){if(this.deferredPrompt){this.activeTab.set("android"),this.showInstallModal.set(!0);return}this.isIOS&&(this.activeTab.set("ios"),this.showInstallModal.set(!0))}}triggerInstall(){return _(this,null,function*(){this.deferredPrompt&&(this.deferredPrompt.prompt(),yield this.deferredPrompt.userChoice,this.deferredPrompt=null,this.showInstallModal.set(!1))})}triggerUpdate(){return _(this,null,function*(){let n=yield navigator.serviceWorker.getRegistration();n?.waiting&&n.waiting.postMessage({type:"SKIP_WAITING"})})}closeInstallModal(){this.showInstallModal.set(!1)}closeUpdateModal(){this.showUpdateModal.set(!1)}setActiveTab(n){this.activeTab.set(n)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};function U(e,n){if(e&1){let t=w();o(0,"div",7)(1,"p"),i(2,"C'est tout simple, clique juste sur le bouton ci-dessous."),a(),o(3,"button",8),m("click",function(){c(t);let l=d(2);return p(l.pwa.triggerInstall())}),i(4,"\u{1F4F2} Installer LPG"),a()()}}function W(e,n){e&1&&(o(0,"div",7),i(1," Installation en 4 \xE9tapes, en moins de 30s."),r(2,"br"),o(3,"u")(4,"b"),i(5,"IMPORTANT"),a()(),i(6," : L'installation ne peut se faire que dans Safari."),r(7,"br")(8,"br"),o(9,"ol")(10,"li"),i(11,"Appuie sur les 3 points en bas \xE0 droite "),r(12,"img",9),a(),o(13,"li"),i(14,"Appuie sur Partager "),r(15,"img",10),a(),o(16,"li"),i(17,"Choisis 'Sur l'\xE9cran d'accueil' "),r(18,"img",11),a(),o(19,"li"),i(20,"Valide 'Ouvrir comme app web' puis 'Ajouter' "),r(21,"img",12),a()(),i(22," Et voil\xE0 ! "),a())}function N(e,n){if(e&1){let t=w();o(0,"div",0)(1,"div",2)(2,"div",3)(3,"button",4),m("click",function(){c(t);let l=d();return p(l.pwa.setActiveTab("android"))}),i(4,"Android"),r(5,"br"),i(6,"Windows"),a(),o(7,"button",4),m("click",function(){c(t);let l=d();return p(l.pwa.setActiveTab("ios"))}),i(8,"iOS"),r(9,"br"),i(10,"Apple"),a(),o(11,"span",5),m("click",function(){c(t);let l=d();return p(l.pwa.closeInstallModal())}),i(12,"\u2716"),a()(),o(13,"div",6)(14,"p"),i(15,"Il semblerait que tu n'as pas encore install\xE9 l'app !"),a(),M(16,U,5,0,"div",7)(17,W,23,0,"div",7),a()()()}if(e&2){let t=d();f(3),I("active",t.pwa.activeTab()==="android"),f(4),I("active",t.pwa.activeTab()==="ios"),f(9),g(t.pwa.activeTab()==="android"?16:-1),f(),g(t.pwa.activeTab()==="ios"?17:-1)}}function R(e,n){if(e&1){let t=w();o(0,"div",1)(1,"div",2)(2,"div",13),i(3," NOUVELLE MAJ DISPONIBLE !!! "),o(4,"span",5),m("click",function(){c(t);let l=d();return p(l.pwa.closeUpdateModal())}),i(5,"\u2716"),a()(),o(6,"div",6)(7,"button",8),m("click",function(){c(t);let l=d();return p(l.pwa.triggerUpdate())}),i(8,"\u{1F4F2} Mettre \xE0 jour LPG"),a(),o(9,"ul")(10,"li"),i(11,"V1 (actuelle) "),o(12,"ul")(13,"li"),i(14,"Mode Infini avec 4 difficult\xE9s"),a(),o(15,"li"),i(16,"Inclusions de skins possible"),a()()()()()()()}}var x=class e{pwa=C(u);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-install-modal"]],decls:2,vars:2,consts:[["(click).self","pwa.closeInstallModal()",1,"modal"],[1,"modal"],[1,"install-content"],[1,"install-header"],[3,"click"],[1,"close",3,"click"],[1,"install-body"],[1,"install-section"],[1,"install-btn",3,"click"],["src","assets/ios_steps/step1.png","alt","Etape 1"],["src","assets/ios_steps/step2.png","alt","Etape 2"],["src","assets/ios_steps/step3.png","alt","Etape 3"],["src","assets/ios_steps/step4.png","alt","Etape 4"],[1,"install-header",2,"justify-content","space-between"]],template:function(t,s){t&1&&M(0,N,18,6,"div",0)(1,R,17,0,"div",1),t&2&&(g(s.pwa.showInstallModal()?0:-1),f(),g(s.pwa.showUpdateModal()?1:-1))},styles:[".modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.install-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#fff;border-radius:12px;width:90%;max-width:600px;padding:0;box-shadow:0 4px 10px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out;height:60vh}.install-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:5%;background:#1e1e2f;color:#fff;padding:10px}.install-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:none;border:none;color:#fff;font-weight:700;padding:8px;cursor:pointer;font-family:inherit}.install-header[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff3;border-radius:6px}.install-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a;border-radius:6px}.install-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer;font-size:18px}.install-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:16px;overflow-y:auto;color:#000}.install-body[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .install-body[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.5em;margin:0 0 1em}.install-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.8em}.install-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;border-radius:8px}.install-btn[_ngcontent-%COMP%]{background:#1e1e2f;color:#fff;border:none;border-radius:6px;padding:10px 14px;font-size:16px;cursor:pointer;font-family:inherit}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};var b=class e{pwa=C(u);ngOnInit(){this.pwa.init()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(t,s){t&1&&r(0,"router-outlet")(1,"app-install-modal")},dependencies:[k,x],encapsulation:2})};E(b,D).catch(e=>console.error(e));
